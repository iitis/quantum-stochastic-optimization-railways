from QTrains import QuboVars



def test_qubo_vars_creation():

    tvar_range =  {"PS": {1: (0., 5.)}, "MR" :{1: (3.,8.), 3: (2.,5.)}, "CS" : {1: (16.,21.) , 3: (15., 18.)}}

    q = QuboVars(tvar_range)


    assert q.station_indexing == {'PS': {1: {0: 0, 1: 1, 2: 2, 3: 3, 4: 4, 5: 5}}, 'MR': {1: {3: 6, 4: 7, 5: 8, 6: 9, 7: 10, 8: 11}, 3: {2: 12, 3: 13, 4: 14, 5: 15}}, 'CS': {1: {16: 16, 17: 17, 18: 18, 19: 19, 20: 20, 21: 21}, 3: {15: 22, 16: 23, 17: 24, 18: 25}}}

    assert q.vars_indexing == {0: ['PS', 1, 0], 1: ['PS', 1, 1], 2: ['PS', 1, 2], 3: ['PS', 1, 3], 4: ['PS', 1, 4], 5: ['PS', 1, 5], 6: ['MR', 1, 3], 7: ['MR', 1, 4], 8: ['MR', 1, 5], 9: ['MR', 1, 6], 10: ['MR', 1, 7], 11: ['MR', 1, 8], 12: ['MR', 3, 2], 13: ['MR', 3, 3], 14: ['MR', 3, 4], 15: ['MR', 3, 5], 16: ['CS', 1, 16], 17: ['CS', 1, 17], 18: ['CS', 1, 18], 19: ['CS', 1, 19], 20: ['CS', 1, 20], 21: ['CS', 1, 21], 22: ['CS', 3, 15], 23: ['CS', 3, 16], 24: ['CS', 3, 17], 25: ['CS', 3, 18]}

    assert q.trains_indexing == {1: {'PS': {0: 0, 1: 1, 2: 2, 3: 3, 4: 4, 5: 5}, 'MR': {3: 6, 4: 7, 5: 8, 6: 9, 7: 10, 8: 11}, 'CS': {16: 16, 17: 17, 18: 18, 19: 19, 20: 20, 21: 21}}, 3: {'MR': {2: 12, 3: 13, 4: 14, 5: 15}, 'CS': {15: 22, 16: 23, 17: 24, 18: 25}}}

    q.dmax = 5

    penalty_at = ["MR", "CS"]

    q.add_objective(penalty_at)

    print(q.objective_dict)

